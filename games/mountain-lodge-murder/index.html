<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>산장의 비밀</title>
  <link rel="stylesheet" href="https://unpkg.com/monogatari/dist/engine/core.css">
  <style>
    body { margin: 0; padding: 0; overflow: hidden; background: #0d0d0d; }
    #game-screen { width: 100vw; height: 100vh; }
  </style>
</head>
<body>
  <div id="game-screen">
    <visual-novel></visual-novel>
  </div>

  <script src="https://unpkg.com/monogatari/dist/engine/core.js"></script>

  <script src="js/script.js"></script>

  <script>
    /** * 4. 브라우저가 위 파일들을 모두 '파싱'한 후 실행되도록 보장합니다.
     * monogatari 객체가 전역(window)에 등록되었는지 확인 후 초기화합니다.
     */
    window.onload = function() {
      if (window.monogatari) {
        window.monogatari.init('#game-screen').then(() => {
          console.log("Monogatari initialized successfully.");
        });
      } else {
        // 여전히 안 된다면, 대문자 'M'으로 시작하는 객체인지 한 번 더 체크합니다.
        if (window.Monogatari) {
            window.Monogatari.init('#game-screen');
        } else {
            document.body.innerHTML = "<h2 style='color:white; text-align:center; margin-top:20%;'>엔진 로드 실패: 네트워크 상태나 CDN 주소를 확인하세요.</h2>";
        }
      }
    };
  </script>
</body>
</html>