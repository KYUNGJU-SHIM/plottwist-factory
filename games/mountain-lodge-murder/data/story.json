{
  "meta": {
    "title": "산장의 비밀",
    "description": "폭설로 고립된 산장에서 벌어진 살인사건. 소설가 김민지가 되어 진실을 파헤치세요.",
    "genre": "mystery",
    "playtime": "30-60분"
  },
  "characters": {
    "char_protagonist": {
      "name": "김민지",
      "color": "#007bff"
    },
    "char_sunyoung": {
      "name": "박선영",
      "color": "#6c757d"
    },
    "char_minsoo": {
      "name": "최민수",
      "color": "#28a745"
    },
    "char_jihoon": {
      "name": "김지훈",
      "color": "#dc3545"
    },
    "char_seojin": {
      "name": "이서진",
      "color": "#ffc107"
    },
    "char_yuna": {
      "name": "한유나",
      "color": "#17a2b8"
    },
    "char_victim": {
      "name": "강태준",
      "color": "#343a40"
    }
  },
  "backgrounds": [
    {
      "id": "bg_mountain_lodge_livingroom",
      "name": "산장 거실"
    },
    {
      "id": "bg_mountain_lodge_room",
      "name": "산장 방"
    },
    {
      "id": "bg_mountain_lodge_study",
      "name": "산장 서재"
    }
  ],
  "flags": {
    "evidence_001": false,
    "evidence_002": false,
    "evidence_003": false,
    "evidence_004": false,
    "evidence_005": false,
    "testimony_001": false,
    "testimony_002": false,
    "critical_clue_count": 0
  },
  "scenes": [
    {
      "id": "scene_prologue_001",
      "chapter": "prologue",
      "title": "폭설 속의 산장",
      "background": "bg_mountain_lodge_livingroom",
      "dialogue": [
        {
          "type": "narration",
          "text": "폭설이 쏟아지는 산장, 나는 취재를 위해 건축가 강태준을 만나러 왔다."
        },
        {
          "type": "speak",
          "character": "char_protagonist",
          "text": "(강태준 씨는 어떤 사람일까...)"
        }
      ],
      "next": "scene_prologue_002"
    },
    {
      "id": "scene_prologue_002",
      "chapter": "prologue",
      "title": "불쾌한 만남",
      "background": "bg_mountain_lodge_livingroom",
      "dialogue": [
        {
          "type": "speak",
          "character": "char_victim",
          "text": "박선영 씨, 그 설계안은 도대체 뭡니까? 엉망진창이군요!"
        },
        {
          "type": "speak",
          "character": "char_sunyoung",
          "text": "죄송합니다, 강태준 대표님. 수정하겠습니다."
        },
        {
          "type": "speak",
          "character": "char_victim",
          "text": "수정? 당신은 재능이 없어. 그냥 그만두는 게 어떻소?"
        },
        {
          "type": "narration",
          "text": "강태준은 박선영에게 모욕적인 말을 퍼부었다. 차가운 분위기가 감돌았다."
        },
        {
          "type": "speak",
          "character": "char_protagonist",
          "text": "(저렇게 심하게 말할 필요가 있을까...)"
        }
      ],
      "next": "scene_incident_001"
    },
    {
      "id": "scene_incident_001",
      "chapter": "incident",
      "title": "사라진 강태준",
      "background": "bg_mountain_lodge_livingroom",
      "dialogue": [
        {
          "type": "narration",
          "text": "다음 날 아침, 강태준이 사라졌다. 그의 방은 잠겨 있었고, 문을 강제로 열자 그는 침대에서 칼에 찔린 채 발견되었다."
        },
        {
          "type": "speak",
          "character": "char_protagonist",
          "text": "맙소사! 살인사건이야!"
        }
      ],
      "next": "scene_investigation_001"
    },
    {
      "id": "scene_investigation_001",
      "chapter": "investigation",
      "title": "사건 현장",
      "background": "bg_mountain_lodge_room",
      "dialogue": [
        {
          "type": "narration",
          "text": "나는 사건 현장을 조사하기 시작했다. 방은 어수선했고, 흉기는 강태준의 옆에 떨어져 있었다."
        },
        {
          "type": "narration",
          "text": "피해자의 일기장이 눈에 띈다."
        },
        {
          "type": "choice",
          "prompt": "일기장을 살펴볼까?",
          "options": [
            {
              "text": "본다",
              "next": "scene_investigation_002",
              "setFlag": {
                "evidence_004": true
              }
            },
            {
              "text": "보지 않는다",
              "next": "scene_investigation_003"
            }
          ]
        }
      ],
      "next": null
    },
    {
      "id": "scene_investigation_002",
      "chapter": "investigation",
      "title": "일기장의 내용",
      "background": "bg_mountain_lodge_room",
      "dialogue": [
        {
          "type": "narration",
          "text": "일기장에는 박선영을 향한 강태준의 악감정이 자세히 적혀 있었다. '저 무능한 여자가 감히 내 작품을 망치려 하다니', '반드시 쫓아내야 한다'..."
        },
        {
          "type": "speak",
          "character": "char_protagonist",
          "text": "(박선영 씨가 범인일까? 하지만 동기만으로는...)"
        }
      ],
      "next": "scene_investigation_003"
    },
    {
      "id": "scene_investigation_003",
      "chapter": "investigation",
      "title": "용의자 심문",
      "background": "bg_mountain_lodge_livingroom",
      "dialogue": [
        {
          "type": "narration",
          "text": "나는 다른 사람들을 심문하기 시작했다."
        },
        {
          "type": "choice",
          "prompt": "누구부터 심문할까?",
          "options": [
            {
              "text": "박선영",
              "next": "scene_sunyoung_interview_001"
            },
            {
              "text": "최민수",
              "next": "scene_minsoo_interview_001"
            },
            {
              "text": "김지훈",
              "next": "scene_jihoon_interview_001"
            },
            {
              "text": "이서진",
              "next": "scene_seojin_interview_001"
            },
            {
              "text": "한유나",
              "next": "scene_yuna_interview_001"
            }
          ]
        }
      ],
      "next": null
    },
    {
      "id": "scene_sunyoung_interview_001",
      "chapter": "interview",
      "title": "박선영 심문",
      "background": "bg_mountain_lodge_livingroom",
      "dialogue": [
        {
          "type": "speak",
          "character": "char_protagonist",
          "text": "박선영 씨, 사건 당시에 어디에 계셨나요?"
        },
        {
          "type": "speak",
          "character": "char_sunyoung",
          "text": "제 방에서 책을 읽고 있었습니다. 라디오를 켜놓고 있어서, 다른 사람들도 들었을 거예요."
        },
        {
          "type": "speak",
          "character": "char_protagonist",
          "text": "(알리바이가 있는 건가...)"
        },
        {
          "type": "choice",
          "prompt": "라디오에 대해 더 물어볼까?",
          "options": [
            {
              "text": "물어본다",
              "next": "scene_sunyoung_interview_002",
              "setFlag": {
                "testimony_001": true
              }
            },
            {
              "text": "다른 질문을 한다",
              "next": "scene_investigation_003"
            }
          ]
        }
      ],
      "next": null
    },
    {
      "id": "scene_sunyoung_interview_002",
      "chapter": "interview",
      "title": "라디오의 진실",
      "background": "bg_mountain_lodge_livingroom",
      "dialogue": [
        {
          "type": "speak",
          "character": "char_protagonist",
          "text": "라디오는 언제 켜셨나요?"
        },
        {
          "type": "speak",
          "character": "char_sunyoung",
          "text": "밤 11시쯤에요. 타이머를 맞춰놓고 잤어요."
        },
        {
          "type": "speak",
          "character": "char_protagonist",
          "text": "(타이머...? 뭔가 이상한데...)"
        }
      ],
      "next": "scene_investigation_003"
    },
    {
      "id": "scene_minsoo_interview_001",
      "chapter": "interview",
      "title": "최민수 심문",
      "background": "bg_mountain_lodge_livingroom",
      "dialogue": [
        {
          "type": "speak",
          "character": "char_protagonist",
          "text": "최민수 씨, 사건 당시에 어디에 계셨나요?"
        },
        {
          "type": "speak",
          "character": "char_minsoo",
          "text": "거실에서 TV를 보고 있었어요. 밤 11시쯤에는 박선영 씨 방에서 라디오 소리가 들리던데요."
        },
        {
          "type": "speak",
          "character": "char_protagonist",
          "text": "(박선영 씨의 알리바이를 증명해주는 건가...?)"
        },
        {
          "type": "setFlag",
          "flag": "testimony_002",
          "value": true
        }
      ],
      "next": "scene_investigation_003"
    },
    {
      "id": "scene_jihoon_interview_001",
      "chapter": "interview",
      "title": "김지훈 심문",
      "background": "bg_mountain_lodge_livingroom",
      "dialogue": [
        {
          "type": "speak",
          "character": "char_protagonist",
          "text": "김지훈 씨, 사건 당시에 어디에 계셨나요?"
        },
        {
          "type": "speak",
          "character": "char_jihoon",
          "text": "제 방에서 자고 있었어요..."
        }
      ],
      "next": "scene_investigation_003"
    },
    {
      "id": "scene_seojin_interview_001",
      "chapter": "interview",
      "title": "이서진 심문",
      "background": "bg_mountain_lodge_livingroom",
      "dialogue": [
        {
          "type": "speak",
          "character": "char_protagonist",
          "text": "이서진 씨, 사건 당시에 어디에 계셨나요?"
        },
        {
          "type": "speak",
          "character": "char_seojin",
          "text": "서재에서 책을 읽고 있었습니다."
        }
      ],
      "next": "scene_investigation_003"
    },
    {
      "id": "scene_yuna_interview_001",
      "chapter": "interview",
      "title": "한유나 심문",
      "background": "bg_mountain_lodge_livingroom",
      "dialogue": [
        {
          "type": "speak",
          "character": "char_protagonist",
          "text": "한유나 씨, 사건 당시에 어디에 계셨나요?"
        },
        {
          "type": "speak",
          "character": "char_yuna",
          "text": "제 방에서 쉬고 있었어요."
        }
      ],
      "next": "scene_investigation_003"
    },
    {
      "id": "scene_investigation_004",
      "chapter": "investigation",
      "title": "라디오 조사",
      "background": "bg_mountain_lodge_room",
      "dialogue": [
        {
          "type": "narration",
          "text": "나는 박선영의 방에 있는 라디오를 조사하기로 했다."
        },
        {
          "type": "choice",
          "prompt": "라디오를 자세히 살펴볼까?",
          "options": [
            {
              "text": "살펴본다",
              "next": "scene_investigation_005"
            },
            {
              "text": "살펴보지 않는다",
              "next": "scene_investigation_006"
            }
          ]
        }
      ],
      "next": null
    },
    {
      "id": "scene_investigation_005",
      "chapter": "investigation",
      "title": "라디오의 비밀",
      "background": "bg_mountain_lodge_room",
      "dialogue": [
        {
          "type": "narration",
          "text": "라디오에는 타이머 기능이 있었다. 타이머는 23시에 맞춰져 있었다."
        },
        {
          "type": "narration",
          "text": "전원 스위치에는 희미하게 지문이 묻어 있다."
        },
        {
          "type": "speak",
          "character": "char_protagonist",
          "text": "(밤 11시면... 박선영 씨가 주장하는 시간과 같잖아? 하지만 타이머를 맞춰놨다면...)"
        },
        {
          "type": "setFlag",
          "flag": "evidence_001",
          "value": true
        },
        {
          "type": "setFlag",
          "flag": "evidence_002",
          "value": true
        },
        {
          "type": "setFlag",
          "flag": "evidence_003",
          "value": true
        }
      ],
      "next": "scene_investigation_006"
    },
    {
      "id": "scene_investigation_006",
      "chapter": "investigation",
      "title": "흉기 발견",
      "background": "bg_mountain_lodge_room",
      "dialogue": [
        {
          "type": "narration",
          "text": "피해자의 방에서 흉기를 다시 확인한다."
        },
        {
          "type": "narration",
          "text": "칼날은 깨끗하게 닦여져 있다."
        },
        {
          "type": "speak",
          "character": "char_protagonist",
          "text": "(이 칼은 어디에서 가져온 걸까?)"
        },
        {
          "type": "setFlag",
          "flag": "evidence_005",
          "value": true
        }
      ],
      "next": "scene_deduction_start"
    },
    {
      "id": "scene_deduction_start",
      "chapter": "deduction",
      "title": "진실을 향하여",
      "background": "bg_mountain_lodge_livingroom",
      "dialogue": [
        {
          "type": "narration",
          "text": "모든 증거와 증언을 종합해 볼 때, 범인은..."
        }
      ],
      "next": null
    },
    {
      "id": "scene_ending_true",
      "chapter": "ending",
      "title": "진실의 종착역",
      "background": "bg_mountain_lodge_livingroom",
      "dialogue": [
        {
          "type": "narration",
          "text": "박선영은 결국 범행을 인정했다. 그녀는 강태준의 갑질과 과거 표절로 인한 좌절감에 복수심을 품고 있었다."
        },
        {
          "type": "speak",
          "character": "char_sunyoung",
          "text": "저는... 저는 어쩔 수 없었어요..."
        }
      ],
      "next": null
    },
    {
      "id": "scene_ending_normal",
      "chapter": "ending",
      "title": "미해결 사건",
      "background": "bg_mountain_lodge_livingroom",
      "dialogue": [
        {
          "type": "narration",
          "text": "결정적인 증거 부족으로 사건은 미해결로 남았다. 하지만 나는 박선영의 슬픈 눈빛을 잊을 수 없었다."
        }
      ],
      "next": null
    },
    {
      "id": "scene_ending_bad1",
      "chapter": "ending",
      "title": "오판",
      "background": "bg_mountain_lodge_livingroom",
      "dialogue": [
        {
          "type": "narration",
          "text": "나는 엉뚱한 사람을 범인으로 지목했다. 진실은 영원히 묻히고 말았다."
        }
      ],
      "next": null
    },
    {
      "id": "scene_ending_bad2",
      "chapter": "ending",
      "title": "단서 부족",
      "background": "bg_mountain_lodge_livingroom",
      "dialogue": [
        {
          "type": "narration",
          "text": "나는 충분한 단서를 찾지 못했다. 사건은 미궁 속으로 빠졌다."
        }
      ],
      "next": null
    }
  ],
  "deductionPhase": {
    "entryScene": "scene_deduction_start",
    "questions": [
      {
        "id": "q_culprit",
        "question": "범인은 누구인가?",
        "type": "character_select",
        "options": [
          {
            "characterId": "char_sunyoung",
            "isCorrect": true
          },
          {
            "characterId": "char_minsoo",
            "isCorrect": false
          },
          {
            "characterId": "char_jihoon",
            "isCorrect": false
          },
          {
            "characterId": "char_seojin",
            "isCorrect": false
          },
          {
            "characterId": "char_yuna",
            "isCorrect": false
          }
        ]
      },
      {
        "id": "q_trick",
        "question": "트릭은?",
        "type": "text_select",
        "options": [
          {
            "text": "타이머를 이용한 라디오 알리바이 트릭",
            "isCorrect": true
          },
          {
            "text": "사라진 흉기를 숨기는 트릭",
            "isCorrect": false
          },
          {
            "text": "거짓 증언을 이용한 혼란 트릭",
            "isCorrect": false
          }
        ]
      },
      {
        "id": "q_motive",
        "question": "범행 동기는?",
        "type": "text_select",
        "options": [
          {
            "text": "강태준의 갑질과 과거 표절에 대한 복수",
            "isCorrect": true
          },
          {
            "text": "강태준의 유산을 노린 살인",
            "isCorrect": false
          },
          {
            "text": "과거 의료사고에 대한 협박",
            "isCorrect": false
          }
        ]
      }
    ]
  },
  "endings": [
    {
      "id": "ending_true",
      "type": "true",
      "title": "TRUE END",
      "condition": {
        "deduction_correct": [
          "q_culprit",
          "q_trick",
          "q_motive"
        ]
      },
      "startScene": "scene_ending_true"
    },
    {
      "id": "ending_normal",
      "type": "normal",
      "title": "NORMAL END",
      "condition": {
        "deduction_correct": [
          "q_culprit"
        ]
      },
      "startScene": "scene_ending_normal"
    },
    {
      "id": "ending_bad1",
      "type": "bad",
      "title": "BAD END 1",
      "condition": {
        "deduction_wrong": [
          "q_culprit"
        ]
      },
      "startScene": "scene_ending_bad1"
    },
    {
      "id": "ending_bad2",
      "type": "bad",
      "title": "BAD END 2",
      "condition": {
        "critical_clue_count": {
          "lessThan": 3
        }
      },
      "startScene": "scene_ending_bad2"
    }
  ],
  "storyValidation": {
    "protagonistDefined": true,
    "victimAppearsInPrologue": true,
    "culpritNeverConfesses": true,
    "allCriticalEvidenceAccessible": true
  }
}